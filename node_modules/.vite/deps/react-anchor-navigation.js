import {
  require_react
} from "./chunk-KZA2ZXKF.js";
import {
  __toESM
} from "./chunk-LNEMQRCO.js";

// node_modules/react-anchor-navigation/dist/esm/react-anchor-navigation.js
var import_react = __toESM(require_react());
var o = () => {
};
var a = (0, import_react.createContext)({ offset: 0, sections: [], hash: "", registerSection: o, unregisterSection: o, setHash: o });
function i() {
  return (i = Object.assign ? Object.assign.bind() : function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var r2 = arguments[t2];
      for (var n2 in r2)
        Object.prototype.hasOwnProperty.call(r2, n2) && (e2[n2] = r2[n2]);
    }
    return e2;
  }).apply(this, arguments);
}
function l(e2, t2) {
  if (null == e2)
    return {};
  var r2, n2, s2 = function(e3, t3) {
    if (null == e3)
      return {};
    var r3, n3, s3 = {}, c3 = Object.keys(e3);
    for (n3 = 0; n3 < c3.length; n3++)
      r3 = c3[n3], t3.indexOf(r3) >= 0 || (s3[r3] = e3[r3]);
    return s3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (n2 = 0; n2 < c2.length; n2++)
      r2 = c2[n2], t2.indexOf(r2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, r2) && (s2[r2] = e2[r2]);
  }
  return s2;
}
var u = ["children", "className", "activeClassName"];
function v(t2) {
  var { children: n2, className: s2, activeClassName: c2 } = t2, o2 = l(t2, u), { hash: v2 } = (0, import_react.useContext)(a), f2 = (s2 ? "".concat(s2, " ") : "") + (v2 === o2.href ? c2 : "");
  return import_react.default.createElement("a", i({}, o2, { className: f2 }), n2);
}
var f = "undefined" != typeof addEventListener && (() => {
  var e2 = false;
  try {
    var t2 = () => {
    }, r2 = Object.defineProperty({}, "passive", { get: () => e2 = true });
    addEventListener("testPassive", t2, r2), removeEventListener("testPassive", t2, r2);
  } catch (e3) {
  }
  return e2;
})();
var h = (e2, t2) => {
  var r2 = 0, n2 = e2;
  do {
    r2 += n2.offsetTop, n2 = n2.offsetParent;
  } while (n2 && n2 !== t2);
  return r2;
};
var d = f && { capture: false, passive: true };
function p(e2, t2) {
  (0, import_react.useEffect)(() => {
    var r2 = (r3) => {
      var { blockScrollEvent: n3, sections: s2, scroller: c2, offset: o2 } = e2.current;
      if (!n3 && s2.length) {
        var a2 = (c2 ? c2.scrollTop : window.pageYOffset || document.documentElement.scrollTop) + o2;
        if (h(s2[0], c2) > a2)
          r3 && t2("#", false);
        else {
          var i2 = s2.findIndex((e3) => h(e3, c2) > a2), l2 = -1 === i2 ? s2[s2.length - 1] : s2[Math.max(i2 - 1, 0)];
          l2 && t2("#".concat(l2.id), false);
        }
      }
    }, n2 = function(e3, t3) {
      var r3 = null;
      function n3() {
        r3 || (r3 = setTimeout(() => {
          r3 = null, e3();
        }, t3));
      }
      return n3.cancel = () => {
        r3 && (clearTimeout(r3), r3 = null);
      }, n3;
    }(r2, 100);
    return addEventListener("scroll", n2, d), r2(), () => {
      removeEventListener("scroll", n2, d), n2.cancel();
    };
  }, []);
}
function m(t2) {
  var { children: r2, getScroller: o2, offset: i2 = 0 } = t2, l2 = (0, import_react.useRef)({ offset: i2, sections: [], blockScrollEvent: false, scroller: null });
  o2 && (l2.current.scroller = o2());
  var [u2, v2] = function(e2) {
    var [t3, r3] = (0, import_react.useState)("");
    return (0, import_react.useEffect)(() => {
      var t4 = (t5) => {
        r3(location.hash), t5 && "hashchange" === t5.type && (e2.current.blockScrollEvent = true, setTimeout(() => {
          e2.current.blockScrollEvent = false;
        }, 100));
      };
      return addEventListener("hashchange", t4, false), addEventListener("popstate", t4, false), t4(), () => {
        removeEventListener("hashchange", t4, false), removeEventListener("popstate", t4, false);
      };
    }, []), [t3, function(e3) {
      var t4 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
      r3(e3), "undefined" != typeof history && "undefined" != typeof location && (t4 || !("pushState" in history) ? location.hash = e3 : history.pushState(null, e3.substr(1), e3));
    }];
  }(l2);
  p(l2, v2);
  return import_react.default.createElement(a.Provider, { value: { offset: i2, hash: u2, sections: l2.current.sections, setHash: v2, registerSection: (e2) => {
    var { sections: t3, scroller: r3 } = l2.current;
    if (!t3.includes(e2)) {
      var n2 = h(e2, r3), s2 = t3.findIndex((e3) => h(e3, r3) > n2);
      -1 === s2 ? t3.push(e2) : t3.splice(s2, 0, e2);
    }
  }, unregisterSection: (e2) => {
    var t3 = l2.current.sections.indexOf(e2);
    -1 !== t3 && l2.current.sections.splice(t3, 1);
  } } }, r2);
}
var g = ["children"];
function b(t2) {
  var { children: n2 } = t2, o2 = l(t2, g), { registerSection: u2, unregisterSection: v2 } = (0, import_react.useContext)(a), f2 = (0, import_react.useRef)(null);
  return (0, import_react.useEffect)(() => (f2.current && (u2(f2.current), o2.id === location.hash.substr(1) && f2.current.scrollIntoView()), () => {
    f2.current && v2(f2.current);
  }), []), import_react.default.createElement(import_react.default.Fragment, null, import_react.default.createElement("b", i({}, o2, { ref: f2 })), n2);
}
export {
  a as AnchorContext,
  v as AnchorLink,
  m as AnchorProvider,
  b as AnchorSection
};
/*! Bundled license information:

react-anchor-navigation/dist/esm/react-anchor-navigation.js:
  (**
   * @license react-anchor-navigation 0.2.7
   * MIT License
   * License: MIT
   *)
*/
//# sourceMappingURL=react-anchor-navigation.js.map
